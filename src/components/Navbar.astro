<section class="relative mx-auto">
    <!-- navbar -->
    <nav class="flex justify-between bg-gray-900 text-white w-screen">
        <div class="px-5 xl:px-12 py-6 flex w-full items-center">
          <a class="text-3xl font-bold font-heading" href="#">
            <!-- <img class="h-9" src="logo.png" alt="logo"> -->
            BluePlanet.
          </a>
          <!-- Nav Links -->
          <ul class="hidden md:flex px-4 mx-auto font-semibold font-heading space-x-12">
            <li><a class="hover:text-accent" href="#">Home</a></li>
            <li><a class="hover:text-accent" href="#">Catagory</a></li>
            <li><a class="hover:text-accent" href="#">Collections</a></li>
            <li><a class="hover:text-accent" href="#">Contact Us</a></li>
          </ul>
          <!-- Language Dropdown -->
          <div class="relative hidden xl:flex items-center space-x-5">
            <button id="langDropdownBtn" class="flex items-center hover:text-gray-200 focus:outline-none">
              <img src="svg/en.svg" alt="English Flag" class="w-6 h-6">
              <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
          </button>

          <!-- Dropdown menu -->
          <div id="langDropdown" class="absolute right-0 mt-40 w-32 bg-white rounded-md shadow-lg z-50 hidden">

            <ul class="py-1 text-gray-700">
              <li>
                <a href="#" data-lang="en" class="flex items-center px-4 py-2 hover:bg-gray-100 hover:text-accent">
                  <img src="svg/en.svg" alt="English" class="w-5 h-5 mr-2"> English
                </a>
              </li>
              <li>
                <a href="#" data-lang="es" class="flex items-center px-4 py-2 hover:bg-gray-100 hover:text-accent">
                  <img src="svg/es.svg" alt="Español" class="w-5 h-5 mr-2"> Español
                </a>
              </li>
              <li>
                <a href="#" data-lang="fr" class="flex items-center px-4 py-2 hover:bg-gray-100 hover:text-accent">
                  <img src="svg/fr.svg" alt="Français" class="w-5 h-5 mr-2"> Français
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
        <!-- Mobile Language Dropdown -->
      <div class="relative flex xl:hidden mr-6 items-center">
        <button id="langDropdownBtnMobile" class="flex items-center hover:text-gray-200 focus:outline-none">
          <img src="svg/en.svg" alt="English Flag" class="w-6 h-6">
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <div id="langDropdownMobile" class="absolute -left-20 mt-40 w-32 bg-white rounded-md shadow-lg z-50 hidden">
          <ul class="py-1 text-gray-700">
            <li>
              <a href="#" data-lang="en" class="flex items-center px-4 py-2 hover:bg-gray-100">
                <img src="svg/en.svg" alt="English" class="w-5 h-5 mr-2"> English
              </a>
            </li>
            <li>
              <a href="#" data-lang="es" class="flex items-center px-4 py-2 hover:bg-gray-100">
                <img src="svg/es.svg" alt="Español" class="w-5 h-5 mr-2"> Español
              </a>
            </li>
            <li>
              <a href="#" data-lang="fr" class="flex items-center px-4 py-2 hover:bg-gray-100">
                <img src="svg/fr.svg" alt="Français" class="w-5 h-5 mr-2"> Français
              </a>
            </li>
          </ul>
        </div>
      </div>
        
      <a class="navbar-burger self-center mr-12 xl:hidden" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hover:text-gray-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
      </a>
    </nav>

</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const setupLangDropdown = (
    btnId: string,
    menuId: string
  ): void => {
    const langBtn = document.getElementById(btnId) as HTMLButtonElement | null;
    const langMenu = document.getElementById(menuId) as HTMLDivElement | null;

    if (!langBtn || !langMenu) return;

    langBtn.addEventListener("click", () => {
      langMenu.classList.toggle("hidden");
    });

    window.addEventListener("click", (e: MouseEvent) => {
      if (!(e.target instanceof Node)) return;
      if (!langBtn.contains(e.target) && !langMenu.contains(e.target)) {
        langMenu.classList.add("hidden");
      }
    });

    const links = langMenu.querySelectorAll<HTMLAnchorElement>("a[data-lang]");
    links.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();

        const selectedLang = link.dataset.lang;
        const flagImg = link.querySelector("img")?.getAttribute("src");

        if (selectedLang && flagImg) {
          const imgElement = langBtn.querySelector("img");
          if (imgElement) {
            imgElement.setAttribute("src", flagImg);
          }

          localStorage.setItem("selectedLang", selectedLang);
          console.log("Idioma seleccionado:", selectedLang);
          langMenu.classList.add("hidden");
        }
      });
    });
  };

  // Aplica lógica a escritorio y mobile
  setupLangDropdown("langDropdownBtn", "langDropdown");
  setupLangDropdown("langDropdownBtnMobile", "langDropdownMobile");
});
</script>